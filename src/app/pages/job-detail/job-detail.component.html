<div class="job-detail-container" *ngIf="job$ | async as job; else loading">
  <h2>{{ job.jobTitle }}</h2>
  <p class="company">{{ job.employerCompanyName }}</p>

  <div class="details">
    <p><strong>Location:</strong> {{ job.location }}</p>
    <p><strong>Salary:</strong> ${{ job.salary }}</p>
    <p><strong>Job Type:</strong> {{ job.jobType }}</p>

    <p *ngIf="job.jobType === 'ONE_DAY'"><strong>Date:</strong> {{ job.jobDate }}</p>
    <div *ngIf="job.jobType === 'CONTRACT'">
      <p><strong>Start Date:</strong> {{ job.startDate }}</p>
      <p><strong>End Date:</strong> {{ job.endDate }}</p>
    </div>
  </div>

  <div class="description">
    <h3>Job Description</h3>
    <p>{{ job.description }}</p>
  </div>

  <div class="skills">
    <h3>Required Skills</h3>
    <p>{{ job.requiredSkills }}</p>
  </div>

  <div class="apply-section" *ngIf="userRole === 'WORKER'">
    <button *ngIf="!hasApplied" (click)="applyForJob(job.id)" [disabled]="isApplying">
      {{ isApplying ? 'Submitting...' : 'Apply Now' }}
    </button>

    <p *ngIf="hasApplied" class="success-message">You have successfully applied for this job.</p>

    <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>
  </div>
</div>

<ng-template #loading>
  <p>Loading job details...</p>
</ng-template>
